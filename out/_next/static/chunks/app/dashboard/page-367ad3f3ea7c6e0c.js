(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{62947:function(e,t,r){Promise.resolve().then(r.bind(r,47269))},47269:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var a,n,s=r(57437),o=r(2265),l=r(86110),d=r(25750),c=r(43480),i=r(28203),u=r(85790),h=r(74522),m=r(39311);function f(e){let{title:t,value:r,description:a,icon:o,trend:f,trendValue:x,status:p}=e,g={users:d.Z,"user-minus":c.Z,calendar:i.Z}[o],b=(()=>{switch(p){case n.PRESENT:return{cardBorder:"border-l-4 border-l-green-500 dark:border-l-green-400",iconBg:"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400",trendUpColor:"text-green-600 dark:text-green-400"};case n.ABSENT:return{cardBorder:"border-l-4 border-l-red-500 dark:border-l-red-400",iconBg:"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",trendUpColor:"text-red-600 dark:text-red-400"};case n.ON_LEAVE:return{cardBorder:"border-l-4 border-l-amber-500 dark:border-l-amber-400",iconBg:"bg-amber-100 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400",trendUpColor:"text-amber-600 dark:text-amber-400"};default:return{cardBorder:"border-l-4 border-l-primary",iconBg:"bg-primary/10 text-primary",trendUpColor:"text-primary"}}})();return(0,s.jsxs)(l.Zb,{className:(0,m.cn)("transition-all hover:shadow-md",b.cardBorder),children:[(0,s.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.ll,{className:"text-sm font-medium",children:t}),(0,s.jsx)("div",{className:(0,m.cn)("p-2 rounded-full",b.iconBg),children:(0,s.jsx)(g,{className:"h-4 w-4"})})]}),(0,s.jsxs)(l.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:r}),(0,s.jsx)(l.SZ,{children:a}),(0,s.jsxs)("div",{className:"flex items-center pt-1",children:["up"===f?(0,s.jsx)(u.Z,{className:"mr-1 h-3 w-3 text-green-500"}):(0,s.jsx)(h.Z,{className:"mr-1 h-3 w-3 text-red-500"}),(0,s.jsxs)("span",{className:(0,m.cn)("text-xs font-medium","up"===f?"text-green-500":"text-red-500"),children:[x," from yesterday"]})]})]})]})}(a=n||(n={})).PRESENT="present",a.ABSENT="absent",a.ON_LEAVE="on_leave",a.LATE="late";var x=r(70057),p=r(48187),g=r(45253),b=r(90045),j=r(16573),v=r(24235),y=r(50039),k=r(86812),N=r(79857),w=r(51125),C=r(91350);let E=()=>{let e=new Date,t=[];for(let r=6;r>=0;r--){let a=(0,p.Z)(e,r),n=(0,x.ZP)(a,"EEE, MMM d"),s=Math.floor(10*Math.random())+20,o=Math.floor(5*Math.random())+2,l=35-s-o;t.push({date:n,Present:s,Absent:o,"On Leave":l})}return t};function S(){let[e]=(0,o.useState)(E),{theme:t}=(0,C.F)(),r="dark"===t;return(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(g.h,{width:"100%",height:"100%",children:(0,s.jsxs)(b.T,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,s.jsx)(j.q,{strokeDasharray:"3 3",stroke:r?"#333":"#eee"}),(0,s.jsx)(v.K,{dataKey:"date",tick:{fill:r?"#aaa":"#666",fontSize:12},tickLine:{stroke:r?"#aaa":"#666"}}),(0,s.jsx)(y.B,{tick:{fill:r?"#aaa":"#666",fontSize:12},tickLine:{stroke:r?"#aaa":"#666"}}),(0,s.jsx)(k.u,{contentStyle:{backgroundColor:r?"#111":"#fff",border:"1px solid ".concat(r?"#333":"#ddd"),color:r?"#fff":"#000"}}),(0,s.jsx)(N.D,{}),(0,s.jsx)(w.u,{type:"monotone",dataKey:"Present",stackId:"1",stroke:"hsl(var(--chart-1))",fill:"hsl(var(--chart-1))"}),(0,s.jsx)(w.u,{type:"monotone",dataKey:"Absent",stackId:"1",stroke:"hsl(var(--chart-2))",fill:"hsl(var(--chart-2))"}),(0,s.jsx)(w.u,{type:"monotone",dataKey:"On Leave",stackId:"1",stroke:"hsl(var(--chart-3))",fill:"hsl(var(--chart-3))"})]})})})}var A=r(57703),_=r(28485),T=r(36612);let M=[{name:"Engineering",value:15,color:"hsl(var(--chart-1))"},{name:"Marketing",value:8,color:"hsl(var(--chart-2))"},{name:"Finance",value:5,color:"hsl(var(--chart-3))"},{name:"HR",value:3,color:"hsl(var(--chart-4))"},{name:"Product",value:4,color:"hsl(var(--chart-5))"}];function O(){let{theme:e}=(0,C.F)(),t="dark"===e;return(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(g.h,{width:"100%",height:"100%",children:(0,s.jsxs)(A.u,{children:[(0,s.jsx)(_.b,{data:M,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{let{name:t,percent:r}=e;return"".concat(t," ").concat((100*r).toFixed(0),"%")},children:M.map((e,t)=>(0,s.jsx)(T.b,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(k.u,{contentStyle:{backgroundColor:t?"#111":"#fff",border:"1px solid ".concat(t?"#333":"#ddd"),color:t?"#fff":"#000"},formatter:(e,t)=>["".concat(e," employees"),t]}),(0,s.jsx)(N.D,{verticalAlign:"bottom",iconSize:10,iconType:"circle",wrapperStyle:{paddingTop:"15px"},formatter:(e,r,a)=>(0,s.jsx)("span",{style:{color:t?"#ddd":"#333",marginRight:"10px"},children:e})})]})})})}var B=r(61396),D=r.n(B),L=r(47713),R=r(74548),Z=r.n(R);function P(){let[e,t]=(0,o.useState)({presentCount:0,absentCount:0,onLeaveCount:0,totalEmployees:1});return(0,o.useEffect)(()=>{(async function(){try{(0,L.getCookie)("username"),(0,L.getCookie)("password");let e=(0,L.getCookie)("userId"),r=await fetch("".concat("https://wbassetmgmtservice.link/VYOMAUMSRestAPI/api/","auth/generateToken"),{method:"POST",headers:{Authorization:"Basic dGVzdDAwMDE6YWRtaW5AMTIz","Content-Type":"application/json"}});if(!r.ok)throw Error("Token generation failed");let a=await r.json(),n=a.data.access_token,s=Z()().format("DD-MM-YYYY"),o=await fetch("https://wbassetmgmtservice.link/VYOMAUMSRestAPI/api/admin/getAdminDashboardDetails",{method:"POST",headers:{accept:"*/*","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({admin_user_id:e,from_date:s,to_date:s})});if(!o.ok)throw Error("Dashboard fetch failed");let l=await o.json(),d=l.data;t({presentCount:d.present_count,absentCount:d.absent_count,onLeaveCount:d.on_leave_count,totalEmployees:d.present_count+d.absent_count+d.on_leave_count||1})}catch(e){t({presentCount:0,absentCount:0,onLeaveCount:0,totalEmployees:1})}})()},[]),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Overview of employee attendance for today"})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Today: ",new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsx)(D(),{href:"/attendance?status=present",children:(0,s.jsx)(f,{title:"Present Today",value:e.presentCount,description:"".concat(Math.round(e.presentCount/e.totalEmployees*100),"% of total employees"),icon:"users",trend:"up",trendValue:"3%",status:n.PRESENT})}),(0,s.jsx)(D(),{href:"/attendance?status=absent",children:(0,s.jsx)(f,{title:"Absent Today",value:e.absentCount,description:"".concat(Math.round(e.absentCount/e.totalEmployees*100),"% of total employees"),icon:"user-minus",trend:"down",trendValue:"1%",status:n.ABSENT})}),(0,s.jsx)(D(),{href:"/attendance?status=on_leave",children:(0,s.jsx)(f,{title:"On Leave Today",value:e.onLeaveCount,description:"".concat(Math.round(e.onLeaveCount/e.totalEmployees*100),"% of total employees"),icon:"calendar",trend:"up",trendValue:"2%",status:n.ON_LEAVE})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)(l.Zb,{className:"col-span-full lg:col-span-2",children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{children:"Attendance Trends"}),(0,s.jsx)(l.SZ,{children:"Employee attendance patterns over the last 7 days"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)(S,{})})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsx)(l.ll,{children:"Department Attendance"}),(0,s.jsx)(l.SZ,{children:"Attendance by department for today"})]}),(0,s.jsx)(l.aY,{children:(0,s.jsx)(O,{})})]})]})]})}},86110:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return o},aY:function(){return i},eW:function(){return u},ll:function(){return d}});var a=r(57437),n=r(2265),s=r(39311);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});i.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},39311:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(57042),n=r(74769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[895,724,890,700,276,971,864,744],function(){return e(e.s=62947)}),_N_E=e.O()}]);